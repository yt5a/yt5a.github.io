<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Sample</title>
  <style id = 'pain'>
    .image {
      margin: 0 auto;
      display: flex;
      align-items: center;
      width: 900px;
    }
    .image__svg {
      position: absolute;
      top: 150px;
      width: 400px;
    }
    .image__sep {
      position: absolute;
      flex-grow: 1;
      top: 50px;
      text-align: center;
    }
    .image__converted {
      position: absolute;
      top: 600px;
      width: 400px;
      height: 400px;
      border: 1px solid rgba(0, 0, 0, 0.5);
    }
  </style>
</head>
<body>
<div class="image">
  <div class="image__svg">

    <svg
        id="svg"
        xmlns="http://www.w3.org/2000/svg"
        width="400"
        height="400"
        viewBox="0 0 400 400"
        preserveAspectRatio="xMidYMid meet"
        style="background-color: #eee;">
      </svg>

  </div>

  <div class="image__sep">
    <div>==&gt;&gt;</div>
    <div><button id="convert-button">変換する</button></div>
  </div>

  <div class="image__converted">
  <img src="" id="converted-image" download="file.png">
  </div>
</div>
<div><button id="button" onclick="draw()">描画</button></div>
<form name="tx">
サイズ：<input type="text" id="dottx" value="2"><br>
</form>
<script src="dot-painter.js"></script>
<script>
//draw
  pxc = 0;
function draw() {

  dot = document.tx.dottx.value;
  pxx = 400;
  pxl = pxx/dot;
  pxc = pxl;
  for (var i = 1; i < dot; i++) {
  if (i==1) {
  var  dotx = '<line x1="0"y1="' + pxl + '" x2=100% y2="' + pxl + '" stroke="#c44"/>';
  var  doty = '<line x1="' + pxl + '"y1="0" x2="' + pxl + '" y2="100%" stroke="#c44"/>';
  }
  else {
  var  dotx = dotx + '<line x1="0"y1="' + pxl + '" x2=100% y2="' + pxl + '" stroke="#c44"/>';
  var  doty = doty + '<line x1="' + pxl + '"y1="0" x2="' + pxl + '" y2="100%" stroke="#c44"/>';
  }
  pxl = pxl + pxc;
  }
  document.getElementById("svg").innerHTML = dotx + doty;
}
</script>

<script type="text/javascript">
  let target = document.getElementById('svg');

  target.addEventListener('click', getPosition);
  function getPosition(e) {
  if (!pxc==0) {
  check = 'p' + Math.floor(e.offsetX/pxc) + Math.floor(e.offsetY/pxc)
  if(!document.getElementById(check)){
  dotpx = Math.floor(e.offsetX/pxc)*pxc;
  dotpy = Math.floor(e.offsetY/pxc)*pxc;
  var gp = document.getElementById("svg").innerHTML
  document.getElementById("svg").innerHTML = gp + '<rect id=' + check + ' x="' + dotpx + '" y="' + dotpy + '" width="' + pxc + '" height="' + pxc + '" fill="rgbaffffff"/>';
  }
 }
}


</script>
</body>
</html>


<!--<body class="white" onLoad="func()"><h1 class="center">イベント処理（<span id="test">マウスでここをクリックして下さい</span>）</h1></body>-->
